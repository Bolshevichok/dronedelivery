syntax = "proto3";

package mission_api;

option go_package = "github.com/Bolshevichok/dronedelivery/internal/pb/mission_api";

import "models/models.proto";

import "google/api/annotations.proto";

service MissionService {
  rpc UpsertMissions(UpsertMissionsRequest) returns (UpsertMissionsResponse) {
    option (google.api.http) = {
      post: "/missions/upsert"
      body: "*"
    };
  }
  rpc GetMission(GetMissionRequest) returns (GetMissionResponse) {
    option (google.api.http) = {
      get: "/missions/{mission_id}"
    };
  }
  rpc CreateOperator(CreateOperatorRequest) returns (CreateOperatorResponse) {
    option (google.api.http) = {
      post: "/operators"
      body: "*"
    };
  }
  rpc CreateLaunchBase(CreateLaunchBaseRequest) returns (CreateLaunchBaseResponse) {
    option (google.api.http) = {
      post: "/launch-bases"
      body: "*"
    };
  }
  rpc CreateDrone(CreateDroneRequest) returns (CreateDroneResponse) {
    option (google.api.http) = {
      post: "/drones"
      body: "*"
    };
  }
}

message UpsertMissionsRequest {
  # repeated это когда много
  repeated models.Mission missions = 1;
}

message UpsertMissionsResponse {
}

message GetMissionRequest {
  uint64 mission_id = 1;
}

message GetMissionResponse {
  models.Mission mission = 1;
}

message CreateOperatorRequest {
  models.Operator operator = 1;
}

message CreateOperatorResponse {
  uint64 id = 1;
}

message CreateLaunchBaseRequest {
  models.LaunchBase launch_base = 1;
}

message CreateLaunchBaseResponse {
  uint64 id = 1;
}

message CreateDroneRequest {
  models.Drone drone = 1;
}

message CreateDroneResponse {
  uint64 id = 1;
}